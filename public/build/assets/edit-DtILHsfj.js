import{a as D,r as g,j as e,H as k,b as x}from"./app-BeMEZRHO.js";import{A as S}from"./app-layout-liZHGClf.js";import{B as m}from"./createLucideIcon-CEY_GNab.js";import{I as c}from"./label-DviludwB.js";import{C as f,b as j,c as v,d as b,a as _}from"./card-IdahE5os.js";import{H}from"./heading-BRtkhe2Y.js";import{A as I,F as n,T as L,C as q}from"./textarea-C_xZiPEN.js";import{P}from"./plus-DFHue_2S.js";/* empty css            */import"./sheet-CfBWBtyB.js";import"./index-Cyi0Qpd3.js";import"./dropdown-menu-BmwCSW_3.js";import"./index-BJEOJTiA.js";import"./trash-2-OOCOPCYl.js";function ee({blog:r}){const N=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Blogs",href:"/admin/blogs"},{title:"Edit",href:`/admin/blogs/${r.id}/edit`}],{data:a,setData:i,post:T,processing:y,errors:d}=D({title:r.title||"",subtitle:r.subtitle||"",category:r.category||"adventure",description:r.description||"",featured_image:null,author_name:r.author_name||"",author_role:r.author_role||"",author_avatar:null,status:r.status||"draft"}),[u,h]=g.useState([{id:"1",type:"heading",content:"",level:"H2"}]),[C,w]=g.useState(r.featured_image?`/storage/${r.featured_image}`:null);g.useEffect(()=>{if(r.content){const t=[];new DOMParser().parseFromString(r.content,"text/html").body.childNodes.forEach((o,p)=>{o.nodeName.match(/H[1-4]/)?t.push({id:`${Date.now()}-${p}`,type:"heading",content:o.textContent||"",level:o.nodeName}):o.nodeName==="P"?t.push({id:`${Date.now()}-${p}`,type:"paragraph",content:o.textContent||""}):o.nodeName==="BLOCKQUOTE"&&t.push({id:`${Date.now()}-${p}`,type:"quote",content:o.textContent||""})}),t.length>0&&h(t)}},[r.content]);const B=()=>{h([...u,{id:Date.now().toString(),type:"heading",content:"",level:"H2"}])},F=t=>{h(u.filter(l=>l.id!==t))},$=(t,l,s)=>{h(u.map(o=>o.id===t?{...o,[l]:s}:o))},E=t=>{const l=t.target.files?.[0];if(l){i("featured_image",l);const s=new FileReader;s.onloadend=()=>w(s.result),s.readAsDataURL(l)}},A=t=>{t.preventDefault();const l=u.map(s=>{switch(s.type){case"heading":return`<${s.level?.toLowerCase()}>${s.content}</${s.level?.toLowerCase()}>`;case"paragraph":return`<p>${s.content}</p>`;case"quote":return`<blockquote>${s.content}</blockquote>`;default:return""}}).join(`
`);x.post(`/admin/blogs/${r.id}`,{_method:"put",title:a.title,subtitle:a.subtitle,category:a.category,description:a.description,content:l,...a.featured_image&&{featured_image:a.featured_image},author_name:a.author_name,author_role:a.author_role,...a.author_avatar&&{author_avatar:a.author_avatar},status:a.status},{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{console.log("Blog updated successfully")},onError:s=>{console.error("Validation errors:",s)}})};return e.jsxs(S,{breadcrumbs:N,children:[e.jsx(k,{title:`Edit Blog - ${r.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(H,{title:"Edit Blog",description:"Update blog details and publish changes"}),e.jsxs(m,{type:"button",variant:"outline",onClick:()=>x.visit("/admin/blogs"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Blogs"]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs(f,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Blog Details"}),e.jsx(b,{children:"Edit the blog post details"})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(n,{label:"Title",error:d.title,required:!0,htmlFor:"title",children:e.jsx(c,{id:"title",value:a.title,onChange:t=>i("title",t.target.value),placeholder:"Enter blog title... (max 100 characters)",maxLength:100,required:!0})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{label:"Status",htmlFor:"status",children:e.jsxs("select",{id:"status",value:a.status,onChange:t=>i("status",t.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})}),e.jsx(n,{label:"Category",htmlFor:"category",children:e.jsxs("select",{id:"category",value:a.category,onChange:t=>i("category",t.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[e.jsx("option",{value:"adventure",children:"Adventure"}),e.jsx("option",{value:"technology",children:"Technology"}),e.jsx("option",{value:"lifestyle",children:"Lifestyle"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"travel",children:"Travel"}),e.jsx("option",{value:"food",children:"Food"})]})})]})]}),e.jsx(n,{label:"Subtitle",error:d.subtitle,htmlFor:"subtitle",children:e.jsx(c,{id:"subtitle",value:a.subtitle,onChange:t=>i("subtitle",t.target.value),placeholder:"Enter blog subtitle (optional, max 200 characters)...",maxLength:200})}),e.jsx(n,{label:"Description",error:d.description,required:!0,htmlFor:"description",children:e.jsx(L,{id:"description",value:a.description,onChange:t=>i("description",t.target.value),placeholder:"Enter a brief description...",rows:3,required:!0})}),e.jsx(n,{label:"Featured Image",error:d.featured_image,htmlFor:"featured_image",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{id:"featured_image",type:"file",accept:"image/*",onChange:E,className:"cursor-pointer"}),C&&e.jsx("img",{src:C,alt:"Preview",className:"w-20 h-20 rounded-lg object-cover border"})]}),r.featured_image&&!a.featured_image&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current image will be kept if no new image is uploaded"})]})})]})]}),e.jsxs(f,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Content Blocks"}),e.jsx(b,{children:"Edit your blog content using our block-based editor"})]}),e.jsxs(_,{className:"space-y-4",children:[u.map(t=>e.jsx(q,{block:t,onChange:$,onRemove:F},t.id)),e.jsxs(m,{type:"button",variant:"outline",onClick:B,className:"w-full border-dashed",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add Content Block"]})]})]}),e.jsxs(f,{children:[e.jsxs(j,{children:[e.jsx(v,{children:"Author Information"}),e.jsx(b,{children:"Information about the blog author"})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{label:"Author Name",error:d.author_name,htmlFor:"author_name",children:e.jsx(c,{id:"author_name",value:a.author_name,onChange:t=>i("author_name",t.target.value),placeholder:"Author full name"})}),e.jsx(n,{label:"Author Role",error:d.author_role,htmlFor:"author_role",children:e.jsx(c,{id:"author_role",value:a.author_role,onChange:t=>i("author_role",t.target.value),placeholder:"e.g. Content Writer"})})]}),e.jsx(n,{label:"Author Avatar",error:d.author_avatar,htmlFor:"author_avatar",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{id:"author_avatar",type:"file",accept:"image/*",onChange:t=>i("author_avatar",t.target.files?.[0]||null),className:"cursor-pointer"}),r.author_avatar&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`/storage/${r.author_avatar}`,alt:"Current avatar",className:"w-16 h-16 rounded-full object-cover border"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Current avatar"})]})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>x.visit("/admin/blogs"),children:"Cancel"}),e.jsx(m,{type:"submit",disabled:y,children:y?"Updating...":"Update Blog"})]})]})]})]})}export{ee as default};
//# sourceMappingURL=edit-DtILHsfj.js.map
