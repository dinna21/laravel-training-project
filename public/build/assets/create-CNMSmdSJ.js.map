{"version":3,"file":"create-CNMSmdSJ.js","sources":["../../../resources/js/pages/admin/blogs/create.tsx"],"sourcesContent":["import { useForm, Head, router } from \"@inertiajs/react\";\nimport { FormEvent, useState } from \"react\";\nimport AppLayout from '@/layouts/app-layout';\nimport { type BreadcrumbItem } from '@/types';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport Heading from '@/components/heading';\nimport FormField from '@/components/form-field';\nimport ContentBlockItem, { type ContentBlock } from '@/components/content-block-item';\nimport { ArrowLeft, Plus } from 'lucide-react';\nimport { Textarea } from '@/components/ui/textarea';\n\nconst breadcrumbs: BreadcrumbItem[] = [\n    { title: 'Dashboard', href: '/admin/dashboard' },\n    { title: 'Blogs', href: '/admin/blogs' },\n    { title: 'Create', href: '/admin/blogs/create' },\n];\n\nexport default function CreateBlog() {\n    const { data, setData, post, processing, errors, reset } = useForm({\n        title: \"\",\n        subtitle: \"\",\n        description: \"\", // ADD THIS - It's required by controller\n        featured_image: null as File | null,\n        category: \"adventure\",\n        author_name: \"\",\n        author_role: \"\",\n        author_avatar: null as File | null,\n        status: \"draft\" as \"draft\" | \"published\",\n    });\n\n    const [contentBlocks, setContentBlocks] = useState<ContentBlock[]>([\n        { id: '1', type: 'heading', content: '', level: 'H2' }\n    ]);\n    const [featuredImagePreview, setFeaturedImagePreview] = useState<string | null>(null);\n\n    const handleAddBlock = () => {\n        setContentBlocks([...contentBlocks, {\n            id: Date.now().toString(),\n            type: 'heading',\n            content: '',\n            level: 'H2'\n        }]);\n    };\n\n    const handleRemoveBlock = (id: string) => {\n        setContentBlocks(contentBlocks.filter(block => block.id !== id));\n    };\n\n    const handleBlockChange = (id: string, field: keyof ContentBlock, value: string) => {\n        setContentBlocks(contentBlocks.map(block =>\n            block.id === id ? { ...block, [field]: value } : block\n        ));\n    };\n\n    const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            setData(\"featured_image\", file);\n            const reader = new FileReader();\n            reader.onloadend = () => setFeaturedImagePreview(reader.result as string);\n            reader.readAsDataURL(file);\n        }\n    };\n\n    const handleSubmit = (e: FormEvent) => {\n        e.preventDefault();\n\n        const contentHtml = contentBlocks.map(block => {\n            switch (block.type) {\n                case 'heading':\n                    return `<${block.level?.toLowerCase()}>${block.content}</${block.level?.toLowerCase()}>`;\n                case 'paragraph':\n                    return `<p>${block.content}</p>`;\n                case 'quote':\n                    return `<blockquote>${block.content}</blockquote>`;\n                default:\n                    return '';\n            }\n        }).join('\\n');\n\n        router.post('/admin/blogs', { \n            ...data, \n            content: contentHtml \n        }, {\n            forceFormData: true,\n            preserveScroll: true,\n            onSuccess: () => {\n                reset();\n                setContentBlocks([{ id: '1', type: 'heading', content: '', level: 'H2' }]);\n                setFeaturedImagePreview(null);\n            },\n            onError: (errors) => {\n                console.error('Validation errors:', errors);\n            }\n        });\n    };\n\n    return (\n        <AppLayout breadcrumbs={breadcrumbs}>\n            <Head title=\"Create Blog\" />\n\n            <div className=\"flex h-full flex-1 flex-col gap-6 p-6\">\n                <div className=\"flex items-center justify-between\">\n                    <Heading title=\"Create Blog\" description=\"Create a new blog post with rich content blocks\" />\n                    <Button type=\"button\" variant=\"outline\" onClick={() => router.visit('/admin/blogs')}>\n                        <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                        Back to Blogs\n                    </Button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                    {/* Blog Details */}\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Blog Details</CardTitle>\n                            <CardDescription>Basic information about your blog post</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n                                <div className=\"lg:col-span-2\">\n                                    <FormField label=\"Title\" error={errors.title} required htmlFor=\"title\">\n                                        <Input\n                                            id=\"title\"\n                                            value={data.title}\n                                            onChange={(e) => setData(\"title\", e.target.value)}\n                                            placeholder=\"Enter blog title... (max 100 characters)\"\n                                            maxLength={100}\n                                            required\n                                        />\n                                    </FormField>\n                                </div>\n\n                                <div className=\"grid grid-cols-2 gap-4\">\n                                    <FormField label=\"Status\" htmlFor=\"status\">\n                                        <select\n                                            id=\"status\"\n                                            value={data.status}\n                                            onChange={(e) => setData(\"status\", e.target.value as \"draft\" | \"published\")}\n                                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                                        >\n                                            <option value=\"draft\">Draft</option>\n                                            <option value=\"published\">Published</option>\n                                        </select>\n                                    </FormField>\n\n                                    <FormField label=\"Category\" htmlFor=\"category\">\n                                        <select\n                                            id=\"category\"\n                                            value={data.category}\n                                            onChange={(e) => setData(\"category\", e.target.value)}\n                                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                                        >\n                                            <option value=\"adventure\">Adventure</option>\n                                            <option value=\"technology\">Technology</option>\n                                            <option value=\"lifestyle\">Lifestyle</option>\n                                            <option value=\"business\">Business</option>\n                                            <option value=\"travel\">Travel</option>\n                                            <option value=\"food\">Food</option>\n                                        </select>\n                                    </FormField>\n                                </div>\n                            </div>\n\n                            <FormField label=\"Subtitle\" error={errors.subtitle} htmlFor=\"subtitle\">\n                                <Input\n                                    id=\"subtitle\"\n                                    value={data.subtitle}\n                                    onChange={(e) => setData(\"subtitle\", e.target.value)}\n                                    placeholder=\"Enter blog subtitle (optional, max 200 characters)...\"\n                                    maxLength={200}\n                                />\n                            </FormField>\n\n                            {/* ADD DESCRIPTION FIELD */}\n                            <FormField label=\"Description\" error={errors.description} required htmlFor=\"description\">\n                                <Textarea\n                                    id=\"description\"\n                                    value={data.description}\n                                    onChange={(e) => setData(\"description\", e.target.value)}\n                                    placeholder=\"Enter a brief description...\"\n                                    rows={3}\n                                    required\n                                />\n                            </FormField>\n\n                            <FormField label=\"Featured Image\" error={errors.featured_image} htmlFor=\"featured_image\">\n                                <div className=\"flex items-center gap-4\">\n                                    <Input id=\"featured_image\" type=\"file\" accept=\"image/*\" onChange={handleImageChange} className=\"cursor-pointer\" />\n                                    {featuredImagePreview && (\n                                        <img src={featuredImagePreview} alt=\"Preview\" className=\"w-20 h-20 rounded-lg object-cover border\" />\n                                    )}\n                                </div>\n                            </FormField>\n                        </CardContent>\n                    </Card>\n\n                    {/* Content Blocks */}\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Content Blocks</CardTitle>\n                            <CardDescription>Build your blog content using our block-based editor</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            {contentBlocks.map((block) => (\n                                <ContentBlockItem\n                                    key={block.id}\n                                    block={block}\n                                    onChange={handleBlockChange}\n                                    onRemove={handleRemoveBlock}\n                                />\n                            ))}\n                            <Button type=\"button\" variant=\"outline\" onClick={handleAddBlock} className=\"w-full border-dashed\">\n                                <Plus className=\"h-4 w-4 mr-2\" />\n                                Add Content Block\n                            </Button>\n                        </CardContent>\n                    </Card>\n\n                    {/* Author Information */}\n                    <Card>\n                        <CardHeader>\n                            <CardTitle>Author Information</CardTitle>\n                            <CardDescription>Information about the blog author</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <FormField label=\"Author Name\" error={errors.author_name} htmlFor=\"author_name\">\n                                    <Input\n                                        id=\"author_name\"\n                                        value={data.author_name}\n                                        onChange={(e) => setData(\"author_name\", e.target.value)}\n                                        placeholder=\"Author full name\"\n                                    />\n                                </FormField>\n\n                                <FormField label=\"Author Role\" error={errors.author_role} htmlFor=\"author_role\">\n                                    <Input\n                                        id=\"author_role\"\n                                        value={data.author_role}\n                                        onChange={(e) => setData(\"author_role\", e.target.value)}\n                                        placeholder=\"e.g. Content Writer\"\n                                    />\n                                </FormField>\n                            </div>\n\n                            <FormField label=\"Author Avatar\" error={errors.author_avatar} htmlFor=\"author_avatar\">\n                                <Input\n                                    id=\"author_avatar\"\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    onChange={(e) => setData(\"author_avatar\", e.target.files?.[0] || null)}\n                                    className=\"cursor-pointer\"\n                                />\n                            </FormField>\n                        </CardContent>\n                    </Card>\n\n                    <div className=\"flex justify-end gap-3\">\n                        <Button type=\"button\" variant=\"outline\" onClick={() => router.visit('/admin/blogs')}>\n                            Cancel\n                        </Button>\n                        <Button type=\"submit\" disabled={processing}>\n                            {processing ? \"Creating...\" : \"Create Blog\"}\n                        </Button>\n                    </div>\n                </form>\n            </div>\n        </AppLayout>\n    );\n}"],"names":["breadcrumbs","CreateBlog","data","setData","post","processing","errors","reset","useForm","contentBlocks","setContentBlocks","useState","featuredImagePreview","setFeaturedImagePreview","handleAddBlock","handleRemoveBlock","id","block","handleBlockChange","field","value","handleImageChange","e","file","reader","handleSubmit","contentHtml","router","jsxs","AppLayout","jsx","Head","Heading","Button","ArrowLeft","Card","CardHeader","CardTitle","CardDescription","CardContent","FormField","Input","Textarea","ContentBlockItem","Plus"],"mappings":"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"}